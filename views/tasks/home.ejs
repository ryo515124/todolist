<% layout('layouts/boilerplate') %>

<div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
  <h2>タスク一覧</h2>

  <form method="GET" action="/tasks/home">
    <select name="sort" class="form-select" aria-label="並び順選択" onchange="this.form.submit()">
      <option value="created" <%= sort === 'created' ? 'selected' : '' %>>追加順</option>
      <option value="time" <%= sort === 'time' ? 'selected' : '' %>>予定時間が近い順</option>
    </select>
  </form>
</div>

 
    <% for ( task of tasks) { %>
      <div class="card mb-3" style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-md-4">
            <img src="..." class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title"><a href="/tasks/<%= task._id %>" class="text-decoration-none text-dark"><%= task.title %></a></h5>
              <p class="card-text"><%= task.description %></p>
              <p class="card-text"><small class="text-body-secondary">期限 : <%= task.formattedTime%></small></p>
            </div>
          </div>
        </div>
      </div>
    <% } %>
<a href="/tasks/new" class="btn btn-primary" role="button">タスクを追加</a>
